{"remainingRequest":"D:\\phpstudy_pro\\WWW\\1209\\v_tst\\v\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\1209\\v_tst\\v\\src\\components\\auth\\Roles.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\1209\\v_tst\\v\\src\\components\\auth\\Roles.vue","mtime":1639400378920},{"path":"D:\\phpstudy_pro\\WWW\\1209\\v_tst\\v\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639133824078},{"path":"D:\\phpstudy_pro\\WWW\\1209\\v_tst\\v\\node_modules\\babel-loader\\lib\\index.js","mtime":1639133822474},{"path":"D:\\phpstudy_pro\\WWW\\1209\\v_tst\\v\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639133824078},{"path":"D:\\phpstudy_pro\\WWW\\1209\\v_tst\\v\\node_modules\\vue-loader\\lib\\index.js","mtime":1639133834224}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDcnVtYnMgZnJvbSAnLi4vY29tbW9uL0NydW1icycKaW1wb3J0IEFkZGZvcm0gZnJvbSAnLi92aWV3cy9BZGRmb3JtJwppbXBvcnQgRWRpdGZvcm0gZnJvbSAnLi92aWV3cy9FZGl0Zm9ybScKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIlJvbGVzIiwKICAgIGNvbXBvbmVudHM6e0NydW1icyxBZGRmb3JtLEVkaXRmb3JtfSwKICAgIGNyZWF0ZWQoKXsKICAgICAgICB0aGlzLmdldFJ1bGVzTGlzdCgpCiAgICB9LAogICAgZGF0YSgpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgY3J1Olsn5p2D6ZmQ566h55CGJywn6KeS6Imy5YiX6KGoJ10sCiAgICAgICAgICAgIHJ1bGVzTGlzdDpbXSwKICAgICAgICAgICAgZm9ybUxhYmVsV2lkdGg6JzE0MHB4JywKICAgICAgICAgICAgLy/mt7vliqAKICAgICAgICAgICAgYWRkX2RpYWxvZzpmYWxzZSwKICAgICAgICAgICAgYWRkZm9ybTp7c3RhdHVzOjF9LAogICAgICAgICAgICAvL+e8lui+kQogICAgICAgICAgICBlZGl0X2RpYWxvZzpmYWxzZSwKICAgICAgICAgICAgZWRpdGZvcm06e30sCgogICAgICAgICAgICBsaXN0Ont9CiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIC8v6I635Y+W5a+55bqU5p2D6ZmQ5YiX6KGoCiAgICAgICAgYXN5bmMgZ2V0TGlzdChpZCl7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGluZm8pCiAgICAgICAgICAgIHRoaXMubGlzdD17fQogICAgICAgICAgICBjb25zdCB7ZGF0YTpyZXN9PWF3YWl0IHRoaXMuJGF4aW9zLmdldCgnYXBpL2F1dGgvbGlzdCcse3BhcmFtczp7aWQ6aW5mby5pZH19KQogICAgICAgICAgICBpZihyZXMuY29kZT09PTApIHRoaXMubGlzdD1yZXMuZGF0YQogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmxpc3QpCiAgICAgICAgfSwKICAgICAgICBhc3luYyBnZXRSdWxlc0xpc3QoKXsKICAgICAgICAgICAgY29uc3Qge2RhdGE6cmVzfT1hd2FpdCB0aGlzLiRheGlvcy5nZXQoJ2FwaS9hdXRoL3J1bGVzJykKICAgICAgICAgICAgdGhpcy5ydWxlc0xpc3Q9cmVzLmRhdGEKICAgICAgICB9LAogICAgICAgIC8v5Zue6LCDCiAgICAgICAgY2xvc2VEaWFsb2dGdW5jKGUsIGYpIHsKICAgICAgICAgICAgaWYgKGYgPT0gJ2FkZCcpIHsKICAgICAgICAgICAgICAgIHRoaXMuYWRkX2RpYWxvZyA9IGUub3BlbkRpYWxvZzsKICAgICAgICAgICAgICAgIHRoaXMuYWRkZm9ybT17c3RhdHVzOjF9CiAgICAgICAgICAgICAgICBpZiAoZS50eXBlID09ICdzdWNjZXNzJykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UnVsZXNMaXN0KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGYgPT0gJ2VkaXQnKSB7CiAgICAgICAgICAgICAgICB0aGlzLmVkaXRfZGlhbG9nID0gZS5vcGVuRGlhbG9nOwogICAgICAgICAgICAgICAgaWYgKGUudHlwZSA9PSAnc3VjY2VzcycpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFJ1bGVzTGlzdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBlZGl0RGlhbG9nKHJvdyl7CiAgICAgICAgICAgIHRoaXMuZWRpdF9kaWFsb2cgPSB0cnVlCiAgICAgICAgICAgIHRoaXMuZWRpdGZvcm09cm93CiAgICAgICAgfSwKICAgICAgICAvL+S/ruaUueeKtuaAgQogICAgICAgIGFzeW5jIGVkaXRTdGF0dXMoc3RhdHVzKXsKICAgICAgICAgICAgY29uc3Qge2RhdGE6cmVzfT1hd2FpdCB0aGlzLiRheGlvcy5nZXQoJ2FwaS9hdXRoL2VkaXRTdGF0dXMnLHtwYXJhbXM6e2lkOnN0YXR1cy5pZCxzdGF0dXM6c3RhdHVzLnN0YXR1c319KQogICAgICAgICAgICBpZihyZXMuY29kZSE9PTApewogICAgICAgICAgICAgICAgc3RhdHVzLnN0YXR1cz09MSA/IHN0YXR1cy5zdGF0dXM9MDpzdGF0dXMuc3RhdHVzPTEKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfkv67mlLnnirbmgIHlpLHotKUnKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS554q25oCB5oiQ5YqfJykKICAgICAgICB9LAogICAgICAgIGRlbFJ1bGUoaWQpewogICAgICAgICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6Xop5LoibIsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRheGlvcy5nZXQoJ2FwaS9hdXRoL2RlbFJ1bGUnLHtwYXJhbXM6e2lkOmlkfX0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLmNvZGUhPT0wKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfliKDpmaTop5LoibLlpLHotKUnKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk6KeS6Imy5oiQ5YqfJykKICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFJ1bGVzTGlzdCgpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBlcnJvciA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfor7fmsYLlpLHotKXkuoYnLGVycm9yLm1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Roles.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Roles.vue","sourceRoot":"src/components/auth","sourcesContent":["<template>\r\n    <div>\r\n        <Crumbs :cru=\"cru\"></Crumbs>\r\n        <el-card>\r\n            <!--添加角色-->\r\n            <el-row>\r\n                <el-col>\r\n                    <el-button type=\"primary\" @click=\"add_dialog = true\">添加角色</el-button>\r\n                </el-col>\r\n            </el-row>\r\n            <!--渲染数据-->\r\n            <el-table :data=\"rulesList\" border stripe style=\"width: 100%;margin-top: 10px;\">\r\n                <el-table-column type=\"index\" label=\"#\" width=\"50\"></el-table-column>\r\n                <el-table-column prop=\"name\" label=\"角色名称\" width=\"180\"></el-table-column>\r\n                <el-table-column prop=\"title\" label=\"角色描述\"></el-table-column>\r\n                <el-table-column label=\"状态\"  width=\"180\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-switch\r\n                                    v-model=\"scope.row.status\"\r\n                                    :active-value=\"1\" :inactive-value=\"0\"\r\n                                    @change=\"editStatus(scope.row)\"\r\n                                    active-color=\"#13ce66\"\r\n                                    inactive-color=\"#ff4949\">\r\n                            </el-switch>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"操作\" width=\"300\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"editDialog(scope.row)\" >编辑</el-button>\r\n                        <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"delRule(scope.row.id)\" >删除</el-button>\r\n                        <el-button type=\"warning\" icon=\"el-icon-setting\" size=\"mini\" >分配权限</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n\r\n            <!--添加数据-->\r\n            <Addform v-if=\"add_dialog\" :add_dialog=\"add_dialog\" @closeDialog=\"closeDialogFunc($event, 'add')\" :form=\"addform\" ></Addform>\r\n            <!--//修改数据-->\r\n            <Editform v-if=\"edit_dialog\" :edit_dialog=\"edit_dialog\" @closeDialog=\"closeDialogFunc($event, 'edit')\" :form=\"editform\"></Editform>\r\n\r\n\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import Crumbs from '../common/Crumbs'\r\n    import Addform from './views/Addform'\r\n    import Editform from './views/Editform'\r\n    export default {\r\n        name: \"Roles\",\r\n        components:{Crumbs,Addform,Editform},\r\n        created(){\r\n            this.getRulesList()\r\n        },\r\n        data(){\r\n            return{\r\n                cru:['权限管理','角色列表'],\r\n                rulesList:[],\r\n                formLabelWidth:'140px',\r\n                //添加\r\n                add_dialog:false,\r\n                addform:{status:1},\r\n                //编辑\r\n                edit_dialog:false,\r\n                editform:{},\r\n\r\n                list:{}\r\n            }\r\n        },\r\n        methods:{\r\n            //获取对应权限列表\r\n            async getList(id){\r\n                // console.log(info)\r\n                this.list={}\r\n                const {data:res}=await this.$axios.get('api/auth/list',{params:{id:info.id}})\r\n                if(res.code===0) this.list=res.data\r\n                console.log(this.list)\r\n            },\r\n            async getRulesList(){\r\n                const {data:res}=await this.$axios.get('api/auth/rules')\r\n                this.rulesList=res.data\r\n            },\r\n            //回调\r\n            closeDialogFunc(e, f) {\r\n                if (f == 'add') {\r\n                    this.add_dialog = e.openDialog;\r\n                    this.addform={status:1}\r\n                    if (e.type == 'success') {\r\n                        this.getRulesList();\r\n                    }\r\n                }\r\n                if (f == 'edit') {\r\n                    this.edit_dialog = e.openDialog;\r\n                    if (e.type == 'success') {\r\n                        this.getRulesList();\r\n                    }\r\n                }\r\n            },\r\n            editDialog(row){\r\n                this.edit_dialog = true\r\n                this.editform=row\r\n            },\r\n            //修改状态\r\n            async editStatus(status){\r\n                const {data:res}=await this.$axios.get('api/auth/editStatus',{params:{id:status.id,status:status.status}})\r\n                if(res.code!==0){\r\n                    status.status==1 ? status.status=0:status.status=1\r\n                    return this.$message.error('修改状态失败')\r\n                }\r\n                this.$message.success('修改状态成功')\r\n            },\r\n            delRule(id){\r\n                this.$confirm('此操作将永久删除该角色, 是否继续?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    this.$axios.get('api/auth/delRule',{params:{id:id}}).then(response => {\r\n                            if(response.data.code!==0){\r\n                                return this.$message.error('删除角色失败')\r\n                            }\r\n                            this.$message.success('删除角色成功')\r\n                        this.getRulesList()\r\n                        },\r\n                        error => {\r\n                            console.log('请求失败了',error.message)\r\n                        })\r\n                }).catch(() => {\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '已取消删除'\r\n                    });\r\n                });\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}